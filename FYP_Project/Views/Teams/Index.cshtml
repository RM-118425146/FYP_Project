@model FYP_Project.ViewModels.TeamViewModel
@{
    ViewData["Title"] = Model.EditableTeam.TeamName;
    int i = 0;
    int? gameID = 0;
}
@foreach (var team in Model.Teams)
{
    if (team.TeamID == Model.EditablePlayer.TeamID)
    {
        gameID = team.TeamID;
    }
}
<link rel="stylesheet" type="text/css" href="~/css/Extras.css" />
<section id="team" class="team section-bg">
    <div class="container">

        <div class="section-title" data-aos="fade-up">
            <h2>@Model.EditableTeam.TeamName</h2>
            <p>Magnam dolores commodi suscipit. Necessitatibus eius consequatur ex aliquid fuga eum quidem. Sit sint consectetur velit. Quisquam quos quisquam cupiditate. Et nemo qui impedit suscipit alias ea. Quia fugiat sit in iste officiis commodi quidem hic quas.</p>
        </div>

        <div class="row">
            @foreach (var player in Model.Players)
            {
                if (player.TeamID == Model.EditableTeam.TeamID)
                {


                    <div class="col-lg-3 col-md-6 d-flex align-items-stretch">
                        <div class="member" data-aos="fade-up">
                            <div class="member-img">
                                @switch (gameID)
                                {
                                    case (0):
                                        <img src="~/img/Rocket-League-Emblem.png" class="img-fluid" alt="">
                                        break;
                                    case (1):
                                        <img src="~/img/Val-Logo.png" class="img-fluid" alt="">
                                        break;
                                    case (2):
                                        <img src="~/img/League-of-Legends-Logo.png" class="img-fluid" alt="">
                                        break;
                                    case (3):
                                        <img src="~/img/csgo_logo.png" class="img-fluid" alt="">
                                        break;
                                }
                            </div>
                            <div class="member-info">
                                <h4>@player.GamerTag</h4>
                                <span>@player.PlayerFirstName @player.PlayerLastName</span>
                            </div>
                            @if (Model.EditablePlayer.Captain == 1)
                            {
                                <div class=" text-center">
                                    <div class="text-center"><a href="/Teams/Remove/@player.PlayerID" class="btn btn-sm btn-success">Remove Player</a></div>
                                </div>
                                <br />
                            }
                        </div>
                    </div>
                }
            }


        </div>
        @if (Model.EditablePlayer.Captain == 1)
        {
            <div class=" text-center">
                <div class="text-center"><a asp-controller=Teams asp-action=Edit class="btn-get-started">Edit Team</a></div>
            </div>
        }
    </div>
</section><!-- End Our Team Section -->

<section id="team" class="team section-bg">
    <div class="container">

        @foreach (var player in Model.Players)
        {
            if (player.TeamID == Model.EditableTeam.TeamID && player.TwitchName != null && i == 0)
            {
                <br />
                <div class="section-title" data-aos="fade-up">
                    <h2>Watch @Model.EditableTeam.TeamName Live</h2>
                </div>
                <!--Twitch embed scource:https://dev.twitch.tv/docs/embed/everything -->
                <br />
                <div class="section-title" data-aos="fade-up">
                    <h4>@player.TwitchName</h4>
                </div>
                <div id="@player.TwitchName" style="padding:15px"></div>

                <script src="https://embed.twitch.tv/embed/v1.js"></script>

                <script type="text/javascript">
            new Twitch.Embed("@player.TwitchName", {
                width: "100%",
                height: 400,
                channel: "@player.TwitchName",
                allowfullscreen: true,
            });
                </script>
                i++;
            }
            else if (player.TeamID == Model.EditableTeam.TeamID && player.TwitchName != null)
            {
                <!--Twitch embed scource:https://dev.twitch.tv/docs/embed/everything -->
                <br />
                <div class="section-title" data-aos="fade-up">
                    <h4>@player.TwitchName</h4>
                </div>
                <div id="@player.TwitchName" style="padding:15px"></div>

                <script src="https://embed.twitch.tv/embed/v1.js"></script>

                <script type="text/javascript">
            new Twitch.Embed("@player.TwitchName", {
                width: "100%",
                height: 400,
                channel: "@player.TwitchName",
                allowfullscreen: true,
            });
                </script>
            }
        }

    </div>
</section>